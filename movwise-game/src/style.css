/* Tailwind CSS v3 対応版 */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* カスタムプロパティ */
:root {
  --color-primary: #4a6bdf;
  --color-secondary: #34d399;
  --color-accent: #f97316;

  --font-game: "Comic Sans MS", cursive;
  
  /* レスポンシブフォントサイズ */
  --text-xs: clamp(0.75rem, 2vw, 0.875rem);
  --text-sm: clamp(0.875rem, 2.5vw, 1rem);
  --text-base: clamp(1rem, 3vw, 1.125rem);
  --text-lg: clamp(1.125rem, 3.5vw, 1.25rem);
  --text-xl: clamp(1.25rem, 4vw, 1.5rem);
  --text-2xl: clamp(1.5rem, 5vw, 1.875rem);
  --text-3xl: clamp(1.875rem, 6vw, 2.25rem);
  
  /* セーフエリア */
  --safe-top: env(safe-area-inset-top);
  --safe-bottom: env(safe-area-inset-bottom);
  --safe-left: env(safe-area-inset-left);
  --safe-right: env(safe-area-inset-right);
}

/* グローバルレスポンシブスタイル */
* {
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}

html {
  font-size: 16px;
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  height: 100%;
  overflow-x: hidden;
}

body {
  margin: 0;
  padding: 0;
  min-height: 100vh;
  min-height: -webkit-fill-available;
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* セーフエリア対応 */
.safe-area-container {
  padding-top: var(--safe-top);
  padding-bottom: var(--safe-bottom);
  padding-left: var(--safe-left);
  padding-right: var(--safe-right);
}

/* ゲーム用コンポーネントスタイル */
@layer components {
  .game-button {
    @apply bg-primary text-white px-4 sm:px-6 py-2 sm:py-3 rounded-xl font-bold text-responsive-base sm:text-lg transform transition-all duration-200 hover:scale-105 active:scale-95 shadow-lg hover:shadow-xl cursor-pointer select-none;
    min-height: 44px;
    touch-action: manipulation;
  }

  .game-button:hover {
    @apply bg-primary/90;
  }

  .game-button:disabled {
    @apply bg-gray-400 cursor-not-allowed transform-none shadow-none;
  }

  .game-card {
    background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
    color: #fff;
    border-radius: 1rem;
    box-shadow: 0 4px 24px 0 rgba(30, 41, 59, 0.15);
    @apply p-4 sm:p-6 border border-gray-100 hover:border-primary transition-all duration-300 transform hover:-translate-y-0 sm:hover:-translate-y-1;
  }

  .game-card:hover {
    border-color: var(--color-primary);
  }

  .score-display {
    @apply text-responsive-2xl sm:text-3xl font-bold px-4 sm:px-6 py-2 sm:py-3 rounded-xl border-2 border-yellow-200 shadow-inner text-primary bg-yellow-50;
  }

  .phonics-option {
    @apply bg-white border-2 font-bold text-responsive-xl sm:text-2xl rounded-xl p-3 sm:p-4 min-h-[60px] sm:h-20 flex items-center justify-center transform transition-all duration-150 hover:scale-105 active:scale-95 shadow-lg hover:shadow-xl cursor-pointer select-none border-primary text-primary;
    touch-action: manipulation;
  }

  .phonics-option:hover {
    @apply text-white bg-primary;
  }

  .phonics-option.correct {
    @apply bg-green-500 text-white border-green-500;
    animation: bounce 1s ease-in-out 2;
  }

  .phonics-option.wrong {
    @apply bg-red-500 text-white border-red-500;
    animation: pulse 0.5s ease-in-out infinite;
  }
}

/* レスポンシブグリッドレイアウト */
.responsive-grid {
  @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6;
}

.responsive-grid-2col {
  @apply grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6;
}

/* レスポンシブコンテナ */
.responsive-container {
  @apply container mx-auto px-4 sm:px-6 lg:px-8;
  max-width: 100%;
}

/* モバイル・タブレット専用スタイル */
@media (max-width: 768px) {
  /* タッチデバイス最適化 */
  button, a, .clickable {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }
  
  /* スクロール最適化 */
  .scroll-container {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }
  
  /* モバイルナビゲーション */
  .mobile-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 50;
    background: white;
    border-top: 1px solid #e5e7eb;
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  /* フォントサイズ調整 */
  h1 {
    @apply text-responsive-2xl;
  }
  
  h2 {
    @apply text-responsive-xl;
  }
  
  h3 {
    @apply text-responsive-lg;
  }
  
  p, span {
    @apply text-responsive-base;
  }
}

/* iPad専用スタイル */
@media (min-width: 768px) and (max-width: 1024px) {
  .tablet-container {
    @apply px-8 py-6;
  }
  
  .game-grid {
    @apply grid-cols-2 gap-6;
  }
}

/* 横向き対応 */
@media (orientation: landscape) and (max-height: 600px) {
  .landscape-compact {
    @apply py-2;
  }
  
  .landscape-hidden {
    @apply hidden;
  }
  
  .game-container {
    max-height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
    overflow-y: auto;
  }
}

/* ダークモード対応 */
@media (prefers-color-scheme: dark) {
  :root {
    --color-primary: #5a7ef0;
    --color-secondary: #4ade80;
    --color-accent: #fb923c;
  }
}

/* アニメーション最適化 */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}